<div class="container-fluid py-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh;">
  <div class="container">
    <!-- Header -->
    <div class="mb-5 text-white">
      <h1 class="display-5 fw-bold mb-2">ğŸ“‹ Form OluÅŸturucu</h1>
      <p class="lead">Kod yazmadan formlarÄ±nÄ±zÄ± oluÅŸturun, yÃ¶netin ve Ã¶zelleÅŸtirin</p>
    </div>

  <div class="row g-4">
    <!-- Form List Sidebar -->
    <div class="col-lg-3">
      <div class="card h-100 border-0 shadow-lg" style="border-top: 4px solid #667eea;">
        <div class="card-header bg-white border-bottom">
          <h5 class="mb-0 fw-bold">ğŸ“ FormlarÄ±nÄ±z</h5>
        </div>
        <div class="card-body">
          <button class="btn btn-gradient fw-bold mb-3 w-100" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white;" (click)="isCreatingForm = true">
            <i class="fas fa-plus"></i> Yeni Form
          </button>

          <div *ngIf="isCreatingForm" class="alert" style="background-color: #e3f2fd; border: 2px solid #667eea; border-radius: 8px; padding: 1rem;">
            <input type="text" class="form-control form-control-sm mb-4" placeholder="Form AdÄ±"
              [(ngModel)]="newFormData.name">
            <input type="text" class="form-control form-control-sm mb-4" placeholder="Form BaÅŸlÄ±ÄŸÄ±"
              [(ngModel)]="newFormData.title">
            <input type="text" class="form-control form-control-sm mb-4" placeholder="AÃ§Ä±klama"
              [(ngModel)]="newFormData.description">
            <button class="btn btn-sm fw-bold me-2" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white;" (click)="createNewForm()">âœ“ OluÅŸtur</button>
            <button class="btn btn-sm btn-light border" (click)="isCreatingForm = false">âœ• Ä°ptal</button>
          </div>

          <div class="list-group list-group-flush">
            <button *ngFor="let form of forms"
              class="list-group-item list-group-item-action border-0 py-3"
              [ngClass]="{'border-start': currentForm?.id === form.id, 'border-start-4': currentForm?.id === form.id}"
              [style.border-left]="currentForm?.id === form.id ? '4px solid #667eea' : '4px solid transparent'"
              [style.background-color]="currentForm?.id === form.id ? '#f0f4ff' : 'white'"
              (click)="loadForm(form)">
              <div class="d-flex justify-content-between align-items-start">
                <div class="flex-grow-1">
                  <h6 class="mb-1 fw-bold">{{ form.name }}</h6>
                  <small class="text-muted">{{ form.fields.length }} alan<span *ngIf="form.fields.length !== 1">lar</span></small>
                </div>
                <button class="btn btn-sm btn-outline-danger" (click)="deleteForm(form.id); $event.stopPropagation()" title="Formu sil">
                  ğŸ—‘ï¸
                </button>
              </div>
            </button>
          </div>
          <div *ngIf="forms.length === 0" class="alert mt-3 mb-0" style="background-color: #f5f5f5; border: 1px dashed #999;">
            <small class="text-muted">HenÃ¼z form yok. BaÅŸlamak iÃ§in bir tane oluÅŸturun!</small>
          </div>
      </div>
    </div>

    <!-- Form Builder -->
    <div class="col-lg-9" *ngIf="currentForm">
      <div class="card border-0 shadow-lg" style="border-top: 4px solid #764ba2;">
        <div class="card-header bg-white border-bottom">
          <h5 class="mb-0 fw-bold">âœï¸ {{ currentForm.title }} - OluÅŸturucu</h5>
        </div>
        <div class="card-body">
          <!-- Form Settings -->
          <div class="mb-4 p-3" style="background-color: #f8f9fa; border-radius: 8px; border-left: 4px solid #667eea;">
            <h6 class="fw-bold mb-3">âš™ï¸ Form AyarlarÄ±</h6>
            <div class="row">
              <div class="col-md-6">
                <label class="form-label">Form BaÅŸlÄ±ÄŸÄ±</label>
                <input type="text" class="form-control mb-4" [(ngModel)]="currentForm.title">
              </div>
              <div class="col-md-6">
                <label class="form-label">GÃ¶nder Butonu Metni</label>
                <input type="text" class="form-control mb-4" [(ngModel)]="currentForm.submitButtonText">
              </div>
              <div class="col-12">
                <label class="form-label">AÃ§Ä±klama</label>
                <input type="text" class="form-control" [(ngModel)]="currentForm.description">
              </div>
            </div>
          </div>

          <hr>

          <!-- Fields Section -->
          <div class="mb-4">
            <div class="d-flex justify-content-between align-items-center mb-3 p-3" style="background-color: #f8f9fa; border-radius: 8px;">
              <h6 class="fw-bold mb-0">ğŸ“‹ Form AlanlarÄ±</h6>
              <button class="btn btn-sm fw-bold" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white;" (click)="addNewField()"><i class="fas fa-plus"></i> Alan Ekle</button>
            </div>

            <!-- Field List -->
            <div class="field-list" *ngIf="currentForm.fields.length > 0">
              <div *ngFor="let field of currentForm.fields; let i = index" class="field-item card mb-2 p-3 border-0 shadow-sm" style="background-color: #fafafa; border-left: 4px solid #667eea !important;">
                <div class="d-flex justify-content-between align-items-start">
                  <div class="flex-grow-1">
                    <strong class="fs-6">{{ field.label }}</strong>
                    <small class="d-block text-muted">{{ field.type }}
                      <span *ngIf="field.required" class="badge" style="background-color: #667eea;">Zorunlu</span>
                    </small>
                  </div>
                  <div class="btn-group" role="group">
                    <button class="btn btn-sm btn-light" [disabled]="i === 0" (click)="moveFieldUp(i)" title="YukarÄ± TaÅŸÄ±" [class.disabled]="i === 0" style="color: #667eea; border: 1px solid #ddd;">â†‘</button>
                    <button class="btn btn-sm btn-light" [disabled]="i === currentForm.fields.length - 1" (click)="moveFieldDown(i)" title="AÅŸaÄŸÄ± TaÅŸÄ±" [class.disabled]="i === currentForm.fields.length - 1" style="color: #667eea; border: 1px solid #ddd;">â†“</button>
                    <button class="btn btn-sm btn-light" (click)="editField(field, i)" style="color: #764ba2; border: 1px solid #ddd;">âœï¸ DÃ¼zenle</button>
                    <button class="btn btn-sm btn-light" (click)="deleteField(i)" style="color: #dc3545; border: 1px solid #ddd;">ğŸ—‘ï¸ Sil</button>
                  </div>
                </div>
              </div>
            </div>

            <div *ngIf="currentForm.fields.length === 0" class="alert" style="background-color: #f0f4ff; border: 2px dashed #667eea; border-radius: 8px;">
              <small>HenÃ¼z alan eklenmedi. "Alan Ekle" dÃ¼ÄŸmesine tÄ±klayarak form oluÅŸturmaya baÅŸlayÄ±n.</small>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="d-flex gap-2 flex-wrap">
            <button class="btn fw-bold" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;" (click)="saveCurrentForm()">ğŸ’¾ Formu Kaydet</button>
            <button class="btn btn-light border fw-bold" style="color: #667eea;" (click)="exportForm()">ğŸ“¥ JSON Ä°ndir</button>
            <label class="btn btn-light border fw-bold" style="color: #764ba2; cursor: pointer; margin: 0;">
              ğŸ“¤ JSON YÃ¼kle
              <input type="file" accept=".json" (change)="importForm($event)" hidden>
            </label>
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-9" *ngIf="!currentForm" class="mt-4">
      <div class="alert text-center p-5" style="background-color: #f0f4ff; border: 2px dashed #667eea; border-radius: 12px;">
        <h5 class="fw-bold" style="color: #667eea;">ğŸ‘‰ OluÅŸturmaya baÅŸlamak iÃ§in bir form seÃ§in veya yeni bir form oluÅŸturun</h5>
      </div>
    </div>
  </div>
  </div>

  <!-- Field Editor Modal -->
  <div class="modal show" [class.d-block]="showFieldEditor" [class.d-none]="!showFieldEditor"
    [style.display]="showFieldEditor ? 'block' : 'none'" [style.background]="showFieldEditor ? 'rgba(0,0,0,0.5)' : 'none'">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header border-0" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
          <h5 class="modal-title fw-bold text-white">{{ editingFieldIndex > -1 ? 'âœï¸ DÃ¼zenle' : 'â• Ekle' }} Alan</h5>
          <button type="button" class="btn-close btn-close-white" (click)="closeFieldEditor()"></button>
        </div>
        <div class="modal-body" *ngIf="selectedField">
          <div class="mb-3">
            <label class="form-label">Alan Etiketi *</label>
            <input type="text" class="form-control" [(ngModel)]="selectedField.label" placeholder="Ã¶rn. E-posta Adresi">
          </div>

          <div class="mb-3">
            <label class="form-label">Alan Tipi</label>
            <select class="form-select" [(ngModel)]="selectedField.type">
              <option *ngFor="let type of fieldTypes" [value]="type">{{ type }}</option>
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label">Yer Tutucu Metni</label>
            <input type="text" class="form-control" [(ngModel)]="selectedField.placeholder"
              placeholder="Yer tutucu metni girin">
          </div>

          <div class="mb-3">
            <label class="form-label">YardÄ±m Metni</label>
            <input type="text" class="form-control" [(ngModel)]="selectedField.helpText"
              placeholder="KullanÄ±cÄ±lar iÃ§in ek yardÄ±m metni">
          </div>

          <!-- Options for select/radio -->
          <div *ngIf="selectedField.type === 'select' || selectedField.type === 'radio'" class="mb-3">
            <label class="form-label">SeÃ§enekler</label>
            <div *ngFor="let option of selectedField.options; let i = index" class="input-group mb-2">
              <input type="text" class="form-control" [(ngModel)]="selectedField.options![i]"
                placeholder="SeÃ§enek deÄŸeri">
              <button class="btn btn-danger" type="button" (click)="removeOption(i)">KaldÄ±r</button>
            </div>
            <button class="btn btn-secondary btn-sm" (click)="addOption()">+ SeÃ§enek Ekle</button>
          </div>

          <!-- Length constraints -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Min Uzunluk</label>
              <input type="number" class="form-control" [(ngModel)]="selectedField.minLength">
            </div>
            <div class="col-md-6">
              <label class="form-label">Max Uzunluk</label>
              <input type="number" class="form-control" [(ngModel)]="selectedField.maxLength">
            </div>
          </div>

          <!-- Required checkbox -->
          <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" [(ngModel)]="selectedField.required" id="requiredCheck">
            <label class="form-check-label" for="requiredCheck">
              Zorunlu Alan
            </label>
          </div>

          <!-- Validation -->
          <div class="mb-3">
            <label class="form-label">DoÄŸrulama Deseni (Regex)</label>
            <input type="text" class="form-control" [(ngModel)]="selectedField.validation"
              placeholder="Ã¶rn. ^[A-Z].*">
          </div>
        </div>
        <div class="modal-footer border-top">
          <button type="button" class="btn btn-light">âœ• Ä°ptal</button>
          <button type="button" class="btn fw-bold" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;" (click)="saveField()">âœ“ AlanÄ± Kaydet</button>
        </div>
      </div>
    </div>
  </div>
</div>
