<div class="container-fluid py-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh;">
  <div class="container">
    <!-- Header -->
    <div class="mb-5 text-white">
      <h1 class="display-5 fw-bold mb-2">üìù Form G√∂r√ºnt√ºleyici</h1>
      <p class="lead">Bir formu se√ßin ve doldumaya ba≈ülayƒ±n</p>
    </div>

    <div class="row g-4">
      <!-- Form List -->
      <div class="col-lg-3">
        <div class="card h-100 border-0 shadow-lg" style="border-top: 4px solid #667eea;">
          <div class="card-header bg-white border-bottom">
            <h5 class="mb-0 fw-bold">üìã Mevcut Formlar</h5>
          </div>
          <div class="card-body">
            <div class="list-group list-group-flush">
              <button *ngFor="let form of forms"
                class="list-group-item list-group-item-action border-0 py-3"
                [style.border-left]="selectedForm?.id === form.id ? '4px solid #667eea' : '4px solid transparent'"
                [style.background-color]="selectedForm?.id === form.id ? '#f0f4ff' : 'white'"
                (click)="loadForm(form)">
                <h6 class="mb-1 fw-bold">{{ form.title }}</h6>
                <small class="text-muted">{{ form.fields.length }} alan<span *ngIf="form.fields.length !== 1">lar</span></small>
              </button>
            </div>
            <div *ngIf="forms.length === 0" class="alert mt-3 mb-0" style="background-color: #f5f5f5; border: 1px dashed #999;">
              <small class="text-muted">Kullanƒ±labilir form yok. Builder'da bir tane olu≈üturun.</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Viewer -->
      <div class="col-lg-9" *ngIf="selectedForm">
        <div class="card border-0 shadow-lg" style="border-top: 4px solid #764ba2;">
          <div class="card-header bg-white border-bottom">
            <h5 class="mb-0 fw-bold">‚úèÔ∏è {{ selectedForm.title }}</h5>
            <p class="text-muted small mt-1 mb-0">{{ selectedForm.description }}</p>
          </div>
          <div class="card-body">
            <form [formGroup]="form" (ngSubmit)="onSubmit()">
              <div *ngFor="let field of selectedForm.fields" class="mb-4">
                <label [for]="field.id" class="form-label fw-bold">
                  {{ field.label }}
                  <span *ngIf="field.required" class="text-danger">*</span>
                </label>

                <!-- Text, Email, Password, Number, Date Input -->
                <!-- cspell: disable-next-line -->
                <input *ngIf="['text', 'email', 'password', 'number', 'date'].includes(field.type)"
                  [type]="field.type"
                  class="form-control"
                  [class.is-invalid]="isFieldInvalid(field.id)"
                  [id]="field.id"
                  [placeholder]="field.placeholder || ''"
                  [formControlName]="field.id"
                  [minlength]="field.minLength || null"
                  [maxlength]="field.maxLength || null">

                <!-- Textarea -->
                <textarea *ngIf="field.type === 'textarea'"
                  class="form-control"
                  [class.is-invalid]="isFieldInvalid(field.id)"
                  [id]="field.id"
                  [placeholder]="field.placeholder || ''"
                  [formControlName]="field.id"
                  rows="4"></textarea>

                <!-- File Input -->
                <input *ngIf="field.type === 'file'"
                  type="file"
                  class="form-control"
                  [class.is-invalid]="isFieldInvalid(field.id)"
                  [id]="field.id"
                  [formControlName]="field.id">

                <!-- Checkbox -->
                <div *ngIf="field.type === 'checkbox'" class="form-check">
                  <input type="checkbox"
                    class="form-check-input"
                    [class.is-invalid]="isFieldInvalid(field.id)"
                    [id]="field.id"
                    [formControlName]="field.id">
                </div>

                <!-- Radio Buttons -->
                <div *ngIf="field.type === 'radio'" class="form-check">
                  <div *ngFor="let option of field.options" class="form-check">
                    <input type="radio"
                      class="form-check-input"
                      [id]="field.id + '_' + option"
                      [value]="option"
                      [formControlName]="field.id">
                    <label class="form-check-label" [for]="field.id + '_' + option">
                      {{ option }}
                    </label>
                  </div>
                </div>

                <!-- Select Dropdown -->
                <select *ngIf="field.type === 'select'"
                  class="form-select"
                  [class.is-invalid]="isFieldInvalid(field.id)"
                  [id]="field.id"
                  [formControlName]="field.id">
                  <option value="">-- Select {{ field.label }} --</option>
                  <option *ngFor="let option of field.options" [value]="option">
                    {{ option }}
                  </option>
                </select>

                <!-- Help Text -->
                <small *ngIf="field.helpText" class="form-text text-muted d-block mt-2">
                  {{ field.helpText }}
                </small>

                <!-- Error Message -->
                <div *ngIf="isFieldInvalid(field.id)" class="invalid-feedback d-block">
                  {{ getFieldError(field.id) }}
                </div>
              </div>

              <!-- Form Actions -->
              <div class="d-flex gap-2 flex-wrap mt-5">
                <button type="submit" class="btn fw-bold" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;">
                  ‚úì {{ selectedForm.submitButtonText || 'Submit' }}
                </button>
                <button type="button" class="btn btn-light border fw-bold" style="color: #667eea;" (click)="reset()">
                  üîÑ Reset
                </button>
              </div>
            </form>

            <!-- Submission Data Display -->
            <div *ngIf="submissionData" class="submission-data mt-5" style="background-color: #f0f4ff; border: 2px solid #667eea; border-radius: 8px; padding: 1.5rem;">
              <h6 class="fw-bold" style="color: #667eea;">‚úì Form Submitted Successfully!</h6>
              <p class="text-muted small mb-3">Here's the data you submitted:</p>
              <pre style="background-color: white; border: 1px solid #ddd; border-radius: 6px; padding: 1rem;">{{ submissionData | json }}</pre>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div class="col-lg-9" *ngIf="!selectedForm">
        <div class="alert text-center p-5" style="background-color: #f0f4ff; border: 2px dashed #667eea; border-radius: 12px;">
          <h5 class="fw-bold" style="color: #667eea;">üëâ Select a form to view and fill it</h5>
        </div>
      </div>
    </div>
  </div>
</div>
